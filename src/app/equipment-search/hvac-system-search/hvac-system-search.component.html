<!--- Begin Material Stepper progress bar content. -->
<mat-stepper #stepper (selectionChange)="tabChange($event)">

    <!--- Step 1: Location. -->
    <mat-step [completed]="MySubmitValidation['location']">
        <ng-template matStepLabel>Location</ng-template>

        <h2 class="rc-main-title">Location</h2>

        <div fxLayout="row column" fxLayoutAlign="center">
            <div fxFlex="25" fxLayout="column" fxLayoutAlign="center center" fxFlex.xs="100" fxFlex.sm="50" fxFlex.md="25" fxLayoutGap="20">
                
                <app-location (stateChange)="setNewState( $event )"></app-location>
            </div>
        </div>

        <!-- button -->
        <div fxLayout="column" fxLayoutAlign="center end" class="rc-stepper-buttons">
            <button type="button" mat-raised-button color="primary" [disabled]="!MySubmitValidation['location']"
                matStepperNext>
                Continue
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
    </mat-step>

    <!--- Step 2: Utility providers. -->
    <mat-step [completed]="MySubmitValidation['utilityProviders']">
        <ng-template matStepLabel>Utility providers</ng-template>
       
        <h2 class="rc-main-title">Utility providers</h2>

        <div fxLayout="row column" fxLayoutAlign="center">
            <div fxFlex="25" fxLayout="column" fxLayoutAlign="center center" fxFlex.xs="100" fxFlex.sm="50" fxFlex.md="25" fxLayoutGap="20">
            
                <app-utility-providers [state]="myData.state!"
                    (utilityProvidersChange)="setNewUtilityProviders( $event )"></app-utility-providers>

            </div>
        </div>
    
        <!-- button -->
        <div fxLayout="column" fxLayoutAlign="center end" class="rc-stepper-buttons">
            <button type="button" mat-raised-button color="primary" [disabled]="!MySubmitValidation['utilityProviders']"
                matStepperNext>
                Continue
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>

    </mat-step>

    <!--- Step 3: Dwelling info. -->
    <mat-step [completed]="MySubmitValidation['dwellingInfo']">
        <ng-template matStepLabel>Dwelling Info</ng-template>

        <h2 class="rc-main-title">Dwelling Info</h2>
        
        <div fxLayout="row column" fxLayoutAlign="center">
            <div fxFlex="75" fxLayout="column" fxLayoutAlign="center center" fxFlex.xs="100" fxFlex.sm="75" fxFlex.md="75" fxLayoutGap="20">
                
                <app-dwelling-info (dwellignInfoChange)="setDwellignInfo( $event )"></app-dwelling-info>

            </div>
        </div>
        <!-- button -->
        <div fxLayout="column" fxLayoutAlign="center end" class="rc-stepper-buttons">
            <button type="button" mat-raised-button color="primary" [disabled]="!MySubmitValidation['dwellingInfo']"
                matStepperNext>
                Continue
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
    </mat-step>       

    <!--- Step 4: System design. -->
    <mat-step [completed]="matStepSystemDesignCompleted || (MySubmitValidation['systemDesign'] && systemDesignForm.get('indoorUnitType')!.value != 'Mini-split indoor') || (systemDesignForm.get('indoorUnitType')!.value == 'Mini-split indoor' && (this.myData.systemDesign?.msMultiZoneType?.length || 0) > 0)">
        <ng-template matStepLabel>System Design</ng-template>
        
        <!--Title-->
        <h2 class="rc-main-title">System design</h2>

        <div fxLayout="row column" fxLayoutAlign="center" fxLayoutGap="8px grid">
            <div fxFlex="25" fxLayout="column" fxLayoutAlign="center stretch" fxFlex.xs="100" fxFlex.sm="70"
                fxFlex.md="25" fxLayoutGap="16">
                <div class="rc-hvac-unit-card">
                    <div class="icon">
                        <img src="../../../../assets/images/icons/outdoor_icon.png" alt="" class="unchecked">
                    </div>
                    <div class="information">
                        <div class="item">
                            <span>Unit Type</span>
                            <p>Outdoor Unit</p>
                        </div>
                        <div class="item">
                            <span>System Type</span>
                            <p>Split System</p>
                        </div>
                        <div class="item">
                            <span>HVAC Type</span>
                            <p>HP</p>
                        </div>
                        <div class="item">
                            <span>HP Heating Capacity</span>
                            <p>30000</p>
                        </div>
                    </div>  
                </div>
            </div>
            <div fxFlex="25" fxLayout="column" fxLayoutAlign="center stretch" fxFlex.xs="100" fxFlex.sm="70" fxFlex.md="25">
                <div class="rc-hvac-unit-card">
                    <div class="icon">
                        <img src="../../../../assets/images/icons/indoor_icon.png" alt="" class="unchecked">
                    </div>
                    <div class="information">
                        <div class="item">
                            <span>Unit Type</span>
                            <p>Indoor Unit</p>
                        </div>
                        <div class="item">
                            <span>System Type</span>
                            <p>Mini-split</p>
                        </div>
                        <div class="item">
                            <span>msUnit Type</span>
                            <p>Cassete</p>
                        </div>
                        <div class="item">
                            <span>Cooling Capacity</span>
                            <p>6000</p>
                        </div>
                        <div class="item">
                            <span>Quantity</span>
                            <p>2</p>
                        </div>
                    </div>  
                </div>
            </div>
            <div fxFlex="25" fxLayout="column" fxLayoutAlign="center stretch" fxFlex.xs="100" fxFlex.sm="70"
                fxFlex.md="25">
                <div class="rc-hvac-unit-card">
                    <div class="icon">
                        <img src="../../../../assets/images/icons/furnace_icon.png" alt="" class="unchecked">
                    </div>
                    <div class="information">
                        <div class="item">
                            <span>Unit Type</span>
                            <p>Furnace</p>
                        </div>
                        <div class="item">
                            <span>System Type</span>
                            <p>New</p>
                        </div>
                    </div>  
                </div>
            </div>
            <div fxFlex="25" fxLayout="column" fxLayoutAlign="center stretch" fxFlex.xs="100" fxFlex.sm="70" fxFlex.md="25">
                <button class="rc-hvac-unit-add">
                    <div class="icon">
                        <mat-icon>add</mat-icon>
                    </div>
                    <span>ADD NEW</span>    
                </button>
            </div>
            <!--- If indoor unit type is mini-split, show indoor unit design table. -->
            <div *ngIf="systemDesignForm.get('indoorUnitType')!.value == 'Mini-split indoor'" fxFlex="65"
                fxFlex.xs="100" fxFlex.sm="70" fxFlex.md="65">

                    <div [formGroup]="msMultiZoneTypeForm">
      
                        <ng-container formArrayName="indoorUnits">
                            <div class="table-overflow">
                                <table>
                                    <thead>
                                        <th>Quantity</th>
                                        <th>Unit type</th>
                                        <th>Size</th>
                                        <th></th>
                                    </thead>
                                    <ng-container *ngFor="let indoorUnitForm of indoorUnits.controls; let i = index" class="lesson-form-row"
                                    [formGroupName]="i">

                                    <tr>
                                        <td>
                                        <!--Quantity -->
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="qty" placeholder="Quantity" [disabled]="false">
                                            <mat-option [value]="1">1</mat-option>
                                            <mat-option [value]="2">2</mat-option>
                                            <mat-option [value]="3">3</mat-option>
                                            <mat-option [value]="4">4</mat-option>
                                            <mat-option [value]="5">5</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </td>
                                        <td>
                                        <!-- Unit type -->
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="unitType" placeholder="Unit type" [disabled]="false">
                                            <mat-option value="Mini-Split Air Handler (Full Size)">Mini-Split Air Handler (Full
                                                Size)</mat-option>
                                            <mat-option value="Ducted mini-split Air Handler (Slim Style)">Ducted mini-split Air Handler (Slim
                                                Style)</mat-option>
                                            <mat-option value="Floor/Ceiling Mount">Floor/Ceiling Mount</mat-option>
                                            <mat-option value="Cassette">Cassette</mat-option>
                                            <mat-option value="High wall">High wall</mat-option>
                                            <mat-option value="1-Way Casette">1-Way Casette</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </td>
                                        <td>
                                        <!-- Size -->
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="size" placeholder="Size" [disabled]="false">
                                            <mat-option [value]="6000">6000</mat-option>
                                            <mat-option [value]="9000">9000</mat-option>
                                            <mat-option [value]="12000">12000</mat-option>
                                            <mat-option [value]="18000">18000</mat-option>
                                            <mat-option [value]="24000">24000</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </td>

                                        <td>

                                        <!-- Save button -->
                                        <button *ngIf="!indoorUnitForm.disabled" class="table-buttons save" matTooltip="Save Changes" color="primary" (click)="addIndoorUnit(i)" [disabled]="!indoorUnitForm.valid">
                                            <mat-icon>check</mat-icon>
                                        </button>
                                        
                                        <!-- Edit button -->
                                        <button *ngIf="indoorUnitForm.disabled" class="table-buttons edit" matTooltip="Edit" color="primary" (click)="editIndoorUnit(i)">
                                            <mat-icon>edit</mat-icon>
                                        </button>

                                        <!-- Delete button -->
                                        <button *ngIf="this.indoorUnits.value.length != 1" class="table-buttons delete" matTooltip="Delete" color="warn" (click)="deleteIndoorUnit(i)">
                                            <mat-icon>delete</mat-icon>
                                            </button>
                                        </td>
                                    </tr>
                                    </ng-container>

                                </table>
                            </div>
                        </ng-container>

                        <div fxLayout="row column" fxLayoutAlign="end center">
                            <button mat-button (click)="newIndoorUnit()" class="rc-btn rc-btn-secondary-1">
                                <mat-icon>add</mat-icon> Add Row
                            </button>
                        </div>

                    </div>
               
            </div>

        </div>

        <!-- button -->
        <div fxLayout="column" fxLayoutAlign="center end" class="rc-stepper-buttons">
            <button type="button" mat-raised-button color="primary"
                [disabled]="!((MySubmitValidation['systemDesign'] && systemDesignForm.get('indoorUnitType')!.value != 'Mini-split indoor') || (systemDesignForm.get('indoorUnitType')!.value == 'Mini-split indoor' && (this.myData.systemDesign?.msMultiZoneType?.length || 0) > 0))" matStepperNext>
                Continue
                <mat-icon>arrow_forward</mat-icon>
            </button>
             
        </div>

    </mat-step>

    <!--- Step 5: System size. -->
    <mat-step [completed]="MySubmitValidation['systemSize']">
        <ng-template matStepLabel>System Size</ng-template>

        <!--Title-->
        <h2 class="rc-main-title">System Size</h2>

        <div fxLayout fxLayoutAlign="center">
            <div fxLayout fxFlex="40" fxLayout="column" fxLayoutAlign="center center" fxFlex.xs="100" fxFlex.sm="70"
                fxFlex.md="40" fxLayoutGap="20">
                <form [formGroup]="systemSizeForm" fxLayout="column" fxFlex="100" fxLayoutAlign="center"
                    class="rc-form">

                    <!--- Cooling tons. -->
                    <mat-form-field appearance="fill">
                        <mat-label>Cooling tons</mat-label>
                        <mat-select #sGroup formControlName="coolingTons">
                            <mat-option radioGroup="sGroup" [value]="0.5"> < 1.0</mat-option>
                            <mat-option radioGroup="sGroup" [value]="1.0">1.0</mat-option>
                            <mat-option radioGroup="sGroup" [value]="1.5">1.5</mat-option>
                            <mat-option radioGroup="sGroup" [value]="2.0">2.0</mat-option>
                            <mat-option radioGroup="sGroup" [value]="2.5">2.5</mat-option>
                            <mat-option radioGroup="sGroup" [value]="3.0">3.0</mat-option>
                            <mat-option radioGroup="sGroup" [value]="3.5">3.5</mat-option>
                            <mat-option radioGroup="sGroup" [value]="4.0">4.0</mat-option>
                            <mat-option radioGroup="sGroup" [value]="4.5">4.5</mat-option>
                            <mat-option radioGroup="sGroup" [value]="5.0">5.0</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <!--- Heating BTUH -->
                    <mat-form-field appearance="fill">
                        <mat-label>Heating BTUH</mat-label>
                        <input matInput placeholder="Heating BTUH" type="number" formControlName="heatingBTUH" required>
                    </mat-form-field>

                </form>
            </div>
        </div>

        <!-- button -->
        <div fxLayout="column" fxLayoutAlign="center end" class="rc-stepper-buttons">
            <button type="button" mat-raised-button color="primary" [disabled]="!MySubmitValidation['systemSize']"
                matStepperNext>
                Continue
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>

    </mat-step>

    <!-- Step 6: Results. -->
    <mat-step>

        <ng-template matStepLabel>AHRI Combinations</ng-template>

        <app-results [payload]="payload"></app-results>

    </mat-step>

</mat-stepper>

{{ this.myData | json }}